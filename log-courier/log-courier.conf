{%- from "log-courier/map.jinja" import log-courier with context -%}

{
        "network": {
                "servers": [ "{{ log-courier.server.address }}:5043" ],
                "transport": "tls",
                "ssl ca": "/etc/log-courier/selfsigned.crt"
        },
        "files": [
                {
                        "paths": [ "/var/log/mail.???","/var/log/syslog" ],
                        "fields": { "type": "syslog" }
                },
                {
                        "paths": [ "/var/log/auth.log" ],
                        "fields": { "type": "auth_log" }
                },
                {
                        "paths": [ "/var/log/nginx/access*.log" ],
                        "fields": { "type": "apache-access" }
                },
                {
                        "paths": [ "/var/log/nginx/error*.log" ],
                        "fields": { "type": "apache-error" }
                },
                {
                        "paths": [ "/var/log/tomcat7/*.txt" ],
                        "fields": { "type": "tomcat-access" }
                },
                {
                        "paths": [ "/var/log/tomcat7/catalina.out" ],
                        "fields": { "type": "tomcat" },
                        "codec": {
                                "name": "multiline",
                                "pattern": "^[A-Z][a-z]{2} [0-9]{2}, [0-9]{4}",
                                "negate": true,
                                "what": "previous"
                        }
                },
                {
                        "paths": [ "/var/lib/tomcat7/webapps/ROOT/logs/*.log" ],
                        "fields": { "type": "magnolia" },
                        "codec": {
                                "name": "multiline",
                                "pattern": "^[A-Z]{3,5}",
                                "negate": true,
                                "what": "previous"
                        }

                }
        ]
}
